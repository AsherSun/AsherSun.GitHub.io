(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{550:function(v,e,_){"use strict";_.r(e);var t=_(4),a=Object(t.a)({},(function(){var v=this,e=v.$createElement,_=v._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"问"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#问"}},[v._v("#")]),v._v(" 问")]),v._v(" "),_("ul",[_("li",[v._v("如何处理数千条数据的列表，点击进入详情页，再返回，定位到当前点击的位置(交互优化、性能优化)")]),v._v(" "),_("li",[_("code",[v._v("transform")]),v._v("开启"),_("code",[v._v("GPU")]),v._v("渲染，导致的渲染模糊，解决方案？")]),v._v(" "),_("li",[v._v("使用"),_("code",[v._v("vue")]),v._v("的"),_("code",[v._v("keep-alive")]),v._v("缓存的组件与直接在内存中缓存数据的区别？为什么"),_("code",[v._v("keep-alive")]),v._v("缓存的组件渲染性能会高于内存中缓存数据的渲染？")]),v._v(" "),_("li",[_("code",[v._v("vue-router")]),v._v("子路由的模式下，如果使用"),_("code",[v._v("router.push({name: 'child', query: params})")]),v._v("有哪些需要注意的？")])]),v._v(" "),_("h2",{attrs:{id:"解"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#解"}},[v._v("#")]),v._v(" 解")]),v._v(" "),_("h3",{attrs:{id:"问题一"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#问题一"}},[v._v("#")]),v._v(" 问题一")]),v._v(" "),_("p",[_("strong",[v._v("问题背景描述")])]),v._v(" "),_("ul",[_("li",[v._v("所使用技术栈为 vue，问题的解决方式借助了vue的一些特性")])]),v._v(" "),_("blockquote",[_("p",[v._v("一个页面，包含推荐数据，包含其他业务逻辑，推荐数据不限。为了不影响主业务逻辑，所以这个页面是不能使用"),_("code",[v._v("keep-alive")]),v._v("全部缓存起来的。\n但是当用户加载到几千条推荐数据的时候，进入详情页，再返回到列表。为了用户体验，需要定位到刚才用户点击的位置。")])]),v._v(" "),_("p",[v._v("当时为了优化这种交互，第一个想到的交互方式是：数据持久化。也就是把加载请求的所有数据存储到运行内存中，当使用的时候再把数据拿出来渲染。")]),v._v(" "),_("p",[v._v("于是乎，想到就做到。当时做完还沾沾自喜，内心暗叹"),_("strong",[v._v("自己真是一个小天才😂")]),v._v("，并没有测试过数据量多的情况，由量变数据引起的质变渲染卡顿。")]),v._v(" "),_("p",[v._v("所以这种方式出现引起了一个性能bug："),_("strong",[v._v("渲染卡顿")])]),v._v(" "),_("p",[_("strong",[v._v("当时解决性能bug思考的方向")])]),v._v(" "),_("ul",[_("li",[v._v("放弃用户交互体验，用户离开列表页面销毁数据，再进入页面从第一页数据开始渲染")]),v._v(" "),_("li",[v._v("不弃用用户交互体验，用户离开列表页面保存数据，使用虚拟滚动方式解决渲染卡顿"),_("a",{attrs:{href:"https://www.yuque.com/diandi-xmv3z",target:"_blank",rel:"noopener noreferrer"}},[v._v("@点滴"),_("OutboundLink")],1)]),v._v(" "),_("li",[v._v("不弃用用户交互体验，借助"),_("code",[v._v("keep-alive")]),v._v("特性，缓存组件实例")])]),v._v(" "),_("p",[v._v("第一个方向是彻底放弃治疗，放弃自己有趣的灵魂(在生活中，虽然大多数人类都是不断妥协，但谁让自己是一个小天才呢😂)")]),v._v(" "),_("p",[v._v("第二个方向是团队内部大神提出的思路：虚拟滚动，我理解的是对内存中的数据进行分页渲染。比如一页20条数据，如果用户点击的是第10页的第8条数据。那么用户从详情页再回来的时候优先渲染第10页数据，把第10页的第8条数据定位到用户可视区域内，如果用户向上滑动，那么加载第11页数据，但是DOM的数量只有一页的数量，也就是20个DOM元素。同理，用户下拉，加载第9页数据")]),v._v(" "),_("p",[v._v("第三个方向，是借助"),_("code",[v._v("keep-alive")]),v._v("。虽然有业务逻辑阻止使用"),_("code",[v._v("keep-alive")]),v._v("缓存整个页面实例，但是可以缓存推荐列表这个组件的实例呀。借助"),_("code",[v._v("vue-router")]),v._v("子路由的方式，把推荐列表组件、商品详情页组件都设置为当前页面的子页面。当用户点击推荐列表中的商品进入商品详情页，那么"),_("code",[v._v("keep-alive")]),v._v("缓存推荐列表组件实例。")]),v._v(" "),_("p",[_("strong",[v._v("总结")])]),v._v(" "),_("p",[v._v("解决问题的方向有很多，当时因为该需求要发布，时间比较紧急，所以只采用了第三个方向，没没有使用方向二的思路。方向二是把逻辑交给一个组件来维护，具有解耦性。放向三虽然实现成本不高，但是代码已经完全耦合业务逻辑，不具有复用。")]),v._v(" "),_("h3",{attrs:{id:"问题二"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#问题二"}},[v._v("#")]),v._v(" 问题二")]),v._v(" "),_("p",[v._v("目前收集到的资料，这一篇还是比较靠谱"),_("a",{attrs:{href:"http://blog.codingplayboy.com/2016/11/27/css3_transform/",target:"_blank",rel:"noopener noreferrer"}},[v._v("飞机票✈️"),_("OutboundLink")],1)]),v._v(" "),_("h3",{attrs:{id:"问题三"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#问题三"}},[v._v("#")]),v._v(" 问题三")]),v._v(" "),_("p",[_("code",[v._v("keep-alive")]),v._v(" 也是将数据缓存到内存中，但是缓存的方式比对纯数据缓存还是有区别, "),_("code",[v._v("keep-alive")]),v._v(" 是把"),_("code",[v._v("vnode")]),v._v("缓存到内存中。所以对比纯数据缓存到内存中再让vue重新走一遍编译流程，"),_("code",[v._v("keep-alive")]),v._v("则是省略了编译流程，直接用于渲染就可以。")]),v._v(" "),_("h3",{attrs:{id:"问题四"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#问题四"}},[v._v("#")]),v._v(" 问题四")]),v._v(" "),_("ul",[_("li",[v._v("子路由中，路径设置不需要给 /, 如果给了 / 则是相对于项目根路径设置路径 。例子："),_("code",[v._v("{path: 'parent', children: [{path: ''}]}")]),v._v("。")]),v._v(" "),_("li",[v._v("子路由中，如果是需要默认展示的组件，那么把父路由中的name 去掉，给子路由中设置name。这样，使用"),_("code",[v._v("router.push({name: 'child', query: params})")]),v._v(" 才会生效")])]),v._v(" "),_("p",[v._v("​")])])}),[],!1,null,null,null);e.default=a.exports}}]);